<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Generating Kubernetes config</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Devon Burriss">

    <link rel="stylesheet" id="theme_link" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.6.0/materia/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <link type="text/css" rel="stylesheet" href="/Starboard/content/navbar-fixed-left.css" />
    <link type="text/css" rel="stylesheet" href="/Starboard/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="/Starboard/content/fsdocs-custom.css" />
    <script type="text/javascript" src="/Starboard/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->
    
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary fixed-left" id="fsdocs-nav">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse navbar-nav-scroll" id="navbarsExampleDefault">
            <a href="/Starboard/"><img id="fsdocs-logo" src="/Starboard/img/logo.png" /></a>
            <!-- BEGIN SEARCH BOX: this adds support for the search box -->
            <div id="header">
                <div class="searchbox" id="fsdocs-searchbox">
                    <label for="search-by">
                        <i class="fas fa-search"></i>
                    </label>
                    <input data-search-input="" id="search-by" type="search" placeholder="Search..." />
                    <span data-search-clear="">
                        <i class="fas fa-times"></i>
                    </span>
                </div>
            </div>

            <!-- END SEARCH BOX: this adds support for the search box -->
            <ul class="navbar-nav">
                <li class="nav-header">Links</li>
                <li class="nav-item" id="fsdocs-license-link"><a class="nav-link" href="https://github.com/dburriss/Starboard/blob/master/LICENSE.md">License</a></li>
                <li class="nav-item" id="fsdocs-release-notes-link"><a class="nav-link" href="https://github.com/dburriss/Starboard/blob/master/RELEASE_NOTES.md">Release Notes</a></li>
                <li class="nav-item" id="fsdocs-repository-link"><a class="nav-link" href="https://github.com/dburriss/Starboard/">Source Repository</a></li>
                <li class="nav-header">
  How-to
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Starboard/1_setup-environment.html">
    Setup your environment
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Starboard/2_generating-kubernetes-config.html">
    Generating Kubernetes config
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Starboard/3_working-with-metadata.html">
    Working with metadata
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Starboard/4_generate-dynamic-config.html">
    Generate dynamic config
  </a>
</li>             
<li class="nav-header">
  Tutorials
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Starboard/tutorials/hello-world.html">
    Hello world
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Starboard/tutorials/guestbook.html">
    Guestbook
  </a>
</li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Starboard/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="masthead">
            <h3 class="muted"><a href="/Starboard/">Starboard</a></h3>
        </div>
        <hr />
        <div class="container" id="fsdocs-content">
            
<h1><a name="Generating-Kubernetes-config" class="anchor" href="#Generating-Kubernetes-config">Generating Kubernetes config</a></h1>
<p>Starboard gives a powerful way to define your Kubernetes config but for that to be useful, we need to generate the kubernetes config. Starboard provides some helpers for doing just this in <a href="https://docs.microsoft.com/dotnet/api/starboard.k8s.kubectlwriter">KubeCtlWriter</a>.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">kubeConfig</span> <span class="o">=</span> <span class="id">k8s</span> <span class="pn">{</span>
    <span class="id">deployment</span> <span class="pn">{</span>
        <span class="s">&quot;my-name&quot;</span> <span class="c">// &lt;- No operation specified</span>
        <span class="id">_labels</span> <span class="pn">[</span><span class="s">&quot;label1&quot;</span><span class="pn">,</span> <span class="s">&quot;value1&quot;</span><span class="pn">]</span>
    <span class="pn">}</span>
<span class="pn">}</span>
</code></pre>
<h2><a name="Printing-to-screen" class="anchor" href="#Printing-to-screen">Printing to screen</a></h2>
<p>If you would like to see what is generated on your screen you can use the <a href="https://docs.microsoft.com/dotnet/api/starboard.k8s.kubectlwriter.print">print</a> function.</p>
<blockquote>
<p>Note that the print also prints any validation errors.</p>
</blockquote>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="id">KubeCtlWriter</span><span class="pn">.</span><span class="id">print</span> <span onmouseout="hideTip(event, 'fs1', 2)" onmouseover="showTip(event, 'fs1', 2)" class="id">kubeConfig</span>
</code></pre>
<table class="pre"><tr><td><pre><code>No value returned by any evaluator</code></pre></td></tr></table>
<h2><a name="Writing-to-file" class="anchor" href="#Writing-to-file">Writing to file</a></h2>
<p>If you would like to save your <a href="https://docs.microsoft.com/dotnet/api/starboard.k8s">K8s</a> config to file, you can use either the <a href="https://docs.microsoft.com/dotnet/api/starboard.k8s.kubectlwriter">KubeCtlWriter</a><code>.toJsonFile</code> or <a href="https://docs.microsoft.com/dotnet/api/starboard.k8s.kubectlwriter">KubeCtlWriter</a><code>.toYamlFile</code> function.
As the names imply, these will save your config as JSON or YAML respectively.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="id">KubeCtlWriter</span><span class="pn">.</span><span class="id">toYamlFile</span> <span class="id">kubeConfig</span> <span class="s">&quot;deployment.yaml&quot;</span>
</code></pre>
<h2><a name="Getting-the-content" class="anchor" href="#Getting-the-content">Getting the content</a></h2>
<p>You can also get the <a href="https://docs.microsoft.com/dotnet/api/starboard.k8s.k8soutput">K8sOutput</a>, which gives you access to not only the JSON or YAML <a href="https://docs.microsoft.com/dotnet/api/starboard.k8s.k8soutput">K8sOutput</a><code>.content</code>, but also to the <a href="https://docs.microsoft.com/dotnet/api/starboard.k8s.k8soutput">K8sOutput</a><code>.errors</code>.
This is an array of validation errors that Starboard has found in the schema. Starboard prevents many schema issues by being strongly typed but it also runs validation on values that should not be empty or should follow certain formatting.
It will still generate the config you specify but gives you errors that you can check before submitting the config to a Kubernetes cluster.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 6)" onmouseover="showTip(event, 'fs3', 6)" class="id">k8sOutput</span> <span class="o">=</span> <span class="id">KubeCtlWriter</span><span class="pn">.</span><span class="id">toYaml</span> <span onmouseout="hideTip(event, 'fs1', 7)" onmouseover="showTip(event, 'fs1', 7)" class="id">kubeConfig</span>
<span onmouseout="hideTip(event, 'fs3', 8)" onmouseover="showTip(event, 'fs3', 8)" class="id">k8sOutput</span><span class="pn">.</span><span class="id">content</span>
</code></pre>
<table class="pre"><tr><td><pre><code>No value returned by any evaluator</code></pre></td></tr></table>
<h2><a name="Validation-errors" class="anchor" href="#Validation-errors">Validation errors</a></h2>
<p>As mentioned, <a href="https://docs.microsoft.com/dotnet/api/starboard.k8s.k8soutput">K8sOutput</a> contains an <code>errors</code> field that contains a list of validation errors.</p>
<p>Each <a href="https://docs.microsoft.com/dotnet/api/starboard.validationproblem">ValidationProblem</a> has a <code>Message</code> field on it that gives back a <code>string</code>. You can print these errors out:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs3', 9)" onmouseover="showTip(event, 'fs3', 9)" class="id">k8sOutput</span><span class="pn">.</span><span class="id">errors</span> 
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 10)" onmouseover="showTip(event, 'fs4', 10)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 11)" onmouseover="showTip(event, 'fs5', 11)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs6', 12)" onmouseover="showTip(event, 'fs6', 12)" class="fn">err</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs6', 13)" onmouseover="showTip(event, 'fs6', 13)" class="fn">err</span><span class="pn">.</span><span class="id">Message</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs4', 14)" onmouseover="showTip(event, 'fs4', 14)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 15)" onmouseover="showTip(event, 'fs7', 15)" class="id">iter</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs8', 16)" onmouseover="showTip(event, 'fs8', 16)" class="fn">eprintfn</span> <span class="s">&quot;</span><span class="pf">%s</span><span class="s">&quot;</span><span class="pn">)</span>
</code></pre>

            <div class="fsdocs-tip" id="fs1">val kubeConfig: obj</div>
<div class="fsdocs-tip" id="fs2">val k8sOutput&#39;: obj</div>
<div class="fsdocs-tip" id="fs3">val k8sOutput: obj</div>
<div class="fsdocs-tip" id="fs4">Multiple items<br />module List

from Microsoft.FSharp.Collections<br /><em>&lt;summary&gt;Contains operations for working with values of type &lt;see cref=&quot;T:Microsoft.FSharp.Collections.list`1&quot; /&gt;.&lt;/summary&gt;<br />&lt;namespacedoc&gt;&lt;summary&gt;Operations for collections such as lists, arrays, sets, maps and sequences. See also 
    &lt;a href=&quot;https://docs.microsoft.com/dotnet/fsharp/language-reference/fsharp-collection-types&quot;&gt;F# Collection Types&lt;/a&gt; in the F# Language Guide.
 &lt;/summary&gt;&lt;/namespacedoc&gt;</em><br /><br />--------------------<br />type List&lt;&#39;T&gt; =
  | op_Nil
  | op_ColonColon of Head: &#39;T * Tail: &#39;T list
  interface IReadOnlyList&lt;&#39;T&gt;
  interface IReadOnlyCollection&lt;&#39;T&gt;
  interface IEnumerable
  interface IEnumerable&lt;&#39;T&gt;
  member GetReverseIndex: rank: int * offset: int -&gt; int
  member GetSlice: startIndex: int option * endIndex: int option -&gt; &#39;T list
  static member Cons: head: &#39;T * tail: &#39;T list -&gt; &#39;T list
  member Head: &#39;T
  member IsEmpty: bool
  member Item: index: int -&gt; &#39;T with get
  ...<br /><em>&lt;summary&gt;The type of immutable singly-linked lists.&lt;/summary&gt;<br />&lt;remarks&gt;Use the constructors &lt;c&gt;[]&lt;/c&gt; and &lt;c&gt;::&lt;/c&gt; (infix) to create values of this type, or
 the notation &lt;c&gt;[1;2;3]&lt;/c&gt;. Use the values in the &lt;c&gt;List&lt;/c&gt; module to manipulate 
 values of this type, or pattern match against the values directly.
 &lt;/remarks&gt;<br />&lt;exclude /&gt;</em></div>
<div class="fsdocs-tip" id="fs5">val map: mapping: (&#39;T -&gt; &#39;U) -&gt; list: &#39;T list -&gt; &#39;U list<br /><em>&lt;summary&gt;Builds a new collection whose elements are the results of applying the given function
 to each of the elements of the collection.&lt;/summary&gt;<br />&lt;param name=&quot;mapping&quot;&gt;The function to transform elements from the input list.&lt;/param&gt;<br />&lt;param name=&quot;list&quot;&gt;The input list.&lt;/param&gt;<br />&lt;returns&gt;The list of transformed elements.&lt;/returns&gt;<br />&lt;example id=&quot;map-1&quot;&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let inputs = [ &quot;a&quot;; &quot;bbb&quot;; &quot;cc&quot; ]

 inputs |&amp;gt; List.map (fun x -&amp;gt; x.Length)
 &lt;/code&gt;
 Evaluates to &lt;c&gt;[ 1; 3; 2 ]&lt;/c&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs6">val err: obj</div>
<div class="fsdocs-tip" id="fs7">val iter: action: (&#39;T -&gt; unit) -&gt; list: &#39;T list -&gt; unit<br /><em>&lt;summary&gt;Applies the given function to each element of the collection.&lt;/summary&gt;<br />&lt;param name=&quot;action&quot;&gt;The function to apply to elements from the input list.&lt;/param&gt;<br />&lt;param name=&quot;list&quot;&gt;The input list.&lt;/param&gt;<br />&lt;example id=&quot;iter-1&quot;&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let inputs = [ &quot;a&quot;; &quot;b&quot;; &quot;c&quot; ]

 inputs |&amp;gt; List.iter (printfn &quot;%s&quot;)
 &lt;/code&gt;
 Evaluates to &lt;c&gt;unit&lt;/c&gt; and prints
 &lt;code lang=&quot;fsharp&quot;&gt;
 a
 b
 c
 &lt;/code&gt;
 in the console.
 &lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs8">val eprintfn: format: Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><em>&lt;summary&gt;Print to &lt;c&gt;stderr&lt;/c&gt; using the given format, and add a newline.&lt;/summary&gt;<br />&lt;param name=&quot;format&quot;&gt;The formatter.&lt;/param&gt;<br />&lt;returns&gt;The formatted result.&lt;/returns&gt;<br />&lt;example&gt;See &lt;c&gt;Printf.eprintfn&lt;/c&gt; (link: &lt;see cref=&quot;M:Microsoft.FSharp.Core.PrintfModule.PrintFormatLineToError``1&quot; /&gt;) for examples.&lt;/example&gt;</em></div>

        </div>

        <!-- BEGIN SEARCH BOX: this adds support for the search box -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
        <script type="text/javascript">var fsdocs_search_baseurl = '/Starboard/';</script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
        <script type="text/javascript" src="/Starboard/content/fsdocs-search.js"></script>
        <!-- END SEARCH BOX: this adds support for the search box -->
    </div>
</body>

</html>