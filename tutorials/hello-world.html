<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Hello world</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Devon Burriss">

    <link rel="stylesheet" id="theme_link" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.6.0/materia/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <link type="text/css" rel="stylesheet" href="/Overboard/content/navbar-fixed-left.css" />
    <link type="text/css" rel="stylesheet" href="/Overboard/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="/Overboard/content/fsdocs-custom.css" />
    <script type="text/javascript" src="/Overboard/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->
    
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary fixed-left" id="fsdocs-nav">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse navbar-nav-scroll" id="navbarsExampleDefault">
            <a href="/Overboard/"><img id="fsdocs-logo" src="/Overboard/img/logo.png" /></a>
            <!-- BEGIN SEARCH BOX: this adds support for the search box -->
            <div id="header">
                <div class="searchbox" id="fsdocs-searchbox">
                    <label for="search-by">
                        <i class="fas fa-search"></i>
                    </label>
                    <input data-search-input="" id="search-by" type="search" placeholder="Search..." />
                    <span data-search-clear="">
                        <i class="fas fa-times"></i>
                    </span>
                </div>
            </div>

            <!-- END SEARCH BOX: this adds support for the search box -->
            <ul class="navbar-nav">
                <li class="nav-header">Links</li>
                <li class="nav-item" id="fsdocs-license-link"><a class="nav-link" href="https://github.com/dburriss/overboard/License">License</a></li>
                <li class="nav-item" id="fsdocs-release-notes-link"><a class="nav-link" href="https://github.com/dburriss/overboard/blob/master/RELEASE_NOTES.md">Release Notes</a></li>
                <li class="nav-item" id="fsdocs-repository-link"><a class="nav-link" href="https://github.com/dburriss/overboard/">Source Repository</a></li>
                <li class="nav-header">
  How-to
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Overboard/1_setup-environment.html">
    Setup your environment
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Overboard/2_generating-kubernetes-config.html">
    Generating Kubernetes config
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Overboard/3_working-with-metadata.html">
    Working with metadata
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Overboard/4_generate-dynamic-config.html">
    Generate dynamic config
  </a>
</li>             
<li class="nav-header">
  Tutorials
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Overboard/tutorials/hello-world.html">
    Hello world
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Overboard/tutorials/guestbook.html">
    Guestbook
  </a>
</li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Overboard/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="masthead">
            <h3 class="muted"><a href="/Overboard/">Overboard</a></h3>
        </div>
        <hr />
        <div class="container" id="fsdocs-content">
            
<h1><a name="Overboard-Hello-world" class="anchor" href="#Overboard-Hello-world">Overboard: Hello world</a></h1>
<p>In this tutorial we will create your first Overboard script and generate the Kubernetes YAML config to a file.</p>
<h2><a name="Requirements" class="anchor" href="#Requirements">Requirements</a></h2>
<ol>
<li>A <a href="https://kubernetes.io/docs/tasks/tools/">Kubernetes cluster to learn on</a> such as Kubernetes on Docker or minikube.</li>
<li>A basic knowledge of using <a href="https://kubernetes.io/docs/reference/kubectl/">kubectl</a></li>
<li><a href="">dotnet SDK</a> installed</li>
<li>Optionally, any IDE that supports F# (Visual Studio Code, IntelliJ Rider, Visual Studio, NeoVim)</li>
</ol>
<blockquote>
<p>Visual Studio Code with the <a href="https://ionide.io/">Ionide</a> is a great choice. See <a href="../setup-environment.fsx">Setup your environment</a> for more details.</p>
</blockquote>
<h2><a name="Initial-configuration" class="anchor" href="#Initial-configuration">Initial configuration</a></h2>
<p>Create a F# script file called <code>deployment.fsx</code></p>
<p>Copy the following code into the script file:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// TODO: import from Nuget</span>
<span class="pp">#r</span> <span class="s">&quot;nuget:YamlDotNet&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget:Newtonsoft.Json&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;../../src/Overboard/bin/debug/net6.0/Overboard.dll&quot;</span>

<span class="c">// open the required namespaces</span>
<span class="k">open</span> <span class="id">Overboard</span>
<span class="k">open</span> <span class="id">Overboard</span><span class="pn">.</span><span class="id">Common</span>
<span class="k">open</span> <span class="id">Overboard</span><span class="pn">.</span><span class="id">Workload</span>

<span class="c">// define your k8s config</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">theInvalidDeployment</span> <span class="o">=</span> <span class="id">k8s</span> <span class="pn">{</span>
    <span class="id">deployment</span> <span class="pn">{</span>
        <span class="id">pod</span> <span class="pn">{</span>
            <span class="id">container</span> <span class="pn">{</span>
                <span class="id">name</span> <span class="s">&quot;nginx&quot;</span>
                <span class="id">image</span> <span class="s">&quot;nginx:latest&quot;</span>
                <span class="id">workingDir</span> <span class="s">&quot;/test-dir&quot;</span>
            <span class="pn">}</span>
        <span class="pn">}</span>
    <span class="pn">}</span>
<span class="pn">}</span>

<span class="c">// Write the YAML to infra.yaml file and get the list of validation issues</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">validations</span> <span class="o">=</span> <span class="id">KubeCtlWriter</span><span class="pn">.</span><span class="id">toYamlFile</span> <span onmouseout="hideTip(event, 'fs1', 3)" onmouseover="showTip(event, 'fs1', 3)" class="id">theInvalidDeployment</span> <span class="s">&quot;hello-world.yaml&quot;</span>
<span class="c">// Let&#39;s print out the validation errors</span>
<span class="k">for</span> <span onmouseout="hideTip(event, 'fs3', 4)" onmouseover="showTip(event, 'fs3', 4)" class="fn">err</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs2', 5)" onmouseover="showTip(event, 'fs2', 5)" class="id">validations</span> <span class="k">do</span>
    <span onmouseout="hideTip(event, 'fs4', 6)" onmouseover="showTip(event, 'fs4', 6)" class="fn">eprintfn</span> <span class="s">&quot;</span><span class="pf">%s</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs3', 7)" onmouseover="showTip(event, 'fs3', 7)" class="fn">err</span><span class="pn">.</span><span class="id">Message</span>
</code></pre>
<h3><a name="Output" class="anchor" href="#Output">Output</a></h3>
<table class="pre"><tr><td><pre><code>No value returned by any evaluator</code></pre></td></tr></table>
<p>Now you can call the fsx file to generate your YAML config.</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip"><code lang="bash">dotnet fsi deployment.fsx
</code></pre></td></tr></table>
<p>If you run the apply command on your YAML file, you will see Kubernetes agrees with the validation errors.</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip"><code lang="bash">kubectl apply -f hello-world.yaml
</code></pre></td></tr></table>
<h2><a name="Fixed-config" class="anchor" href="#Fixed-config">Fixed config</a></h2>
<p>Let's address the validation errors that Overboard found.</p>
<ol>
<li>Call the <code>add_matchLabel</code> operation with a key/value pair for the label.</li>
<li>Next, add the label to the pod using the <code>_labels</code> metadata operation, passing in a list of key/value pairs.</li>
</ol>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs16', 25)" onmouseover="showTip(event, 'fs16', 25)" class="id">theValidDeployment</span> <span class="o">=</span> <span class="id">k8s</span> <span class="pn">{</span> 
    <span class="id">deployment</span> <span class="pn">{</span>
        <span class="s">&quot;test-deployment&quot;</span>
        <span class="id">replicas</span> <span class="n">2</span>
        <span class="id">add_matchLabel</span> <span class="pn">(</span><span class="s">&quot;app&quot;</span><span class="pn">,</span> <span class="s">&quot;nginx&quot;</span><span class="pn">)</span> <span class="c">// &lt;- fix the validation error</span>
        <span class="id">pod</span> <span class="pn">{</span>
            <span class="id">_labels</span> <span class="pn">[</span><span class="pn">(</span><span class="s">&quot;app&quot;</span><span class="pn">,</span> <span class="s">&quot;nginx&quot;</span><span class="pn">)</span><span class="pn">]</span> <span class="c">// &lt;- fix the validation error</span>
            <span class="id">container</span> <span class="pn">{</span>
                <span class="id">name</span> <span class="s">&quot;nginx&quot;</span>
                <span class="id">image</span> <span class="s">&quot;nginx:latest&quot;</span>
                <span class="id">workingDir</span> <span class="s">&quot;/test-dir&quot;</span>
            <span class="pn">}</span>
        <span class="pn">}</span>
    <span class="pn">}</span>
<span class="pn">}</span>

<span class="id">KubeCtlWriter</span><span class="pn">.</span><span class="id">toYamlFile</span> <span onmouseout="hideTip(event, 'fs16', 26)" onmouseover="showTip(event, 'fs16', 26)" class="id">theValidDeployment</span> <span class="s">&quot;hello-world.yaml&quot;</span>
</code></pre>
<h3><a name="Output-1" class="anchor" href="#Output-1">Output</a></h3>
<p>Our validation errors are gone and we have a valid Kubernetes configuration.</p>
<table class="pre"><tr><td><pre><code>No value returned by any evaluator</code></pre></td></tr></table>
<h2><a name="Testing-the-result" class="anchor" href="#Testing-the-result">Testing the result</a></h2>
<p>Let's execute this deployment against our Kubernetes cluster to confirm it is indeed correct.</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip"><code lang="bash">dotnet fsi deployment.fsx
kubectl apply -f hello-world.yaml
kubectl get deployments
</code></pre></td></tr></table>
<p>You should get the message: <em>deployment.apps/test-deployment created</em></p>
<h2><a name="Summary" class="anchor" href="#Summary">Summary</a></h2>
<p>In this tutorial you created your first Overboard script and generated the YAML. We saw how to get and print out the validation errors.
Finally, we saw how we can successfully deploy our generated script.</p>
<p>Congratulations! You have taken a turn toward a new way of configuring your infrastructure.</p>

            <div class="fsdocs-tip" id="fs1">val theInvalidDeployment: obj</div>
<div class="fsdocs-tip" id="fs2">val validations: seq&lt;obj&gt;</div>
<div class="fsdocs-tip" id="fs3">val err: obj</div>
<div class="fsdocs-tip" id="fs4">val eprintfn: format: Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><em>&lt;summary&gt;Print to &lt;c&gt;stderr&lt;/c&gt; using the given format, and add a newline.&lt;/summary&gt;<br />&lt;param name=&quot;format&quot;&gt;The formatter.&lt;/param&gt;<br />&lt;returns&gt;The formatted result.&lt;/returns&gt;<br />&lt;example&gt;See &lt;c&gt;Printf.eprintfn&lt;/c&gt; (link: &lt;see cref=&quot;M:Microsoft.FSharp.Core.PrintfModule.PrintFormatLineToError``1&quot; /&gt;) for examples.&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs5">val output1: obj</div>
<div class="fsdocs-tip" id="fs6">val errorOutput1: string</div>
<div class="fsdocs-tip" id="fs7">Multiple items<br />module List

from Microsoft.FSharp.Collections<br /><em>&lt;summary&gt;Contains operations for working with values of type &lt;see cref=&quot;T:Microsoft.FSharp.Collections.list`1&quot; /&gt;.&lt;/summary&gt;<br />&lt;namespacedoc&gt;&lt;summary&gt;Operations for collections such as lists, arrays, sets, maps and sequences. See also 
    &lt;a href=&quot;https://docs.microsoft.com/dotnet/fsharp/language-reference/fsharp-collection-types&quot;&gt;F# Collection Types&lt;/a&gt; in the F# Language Guide.
 &lt;/summary&gt;&lt;/namespacedoc&gt;</em><br /><br />--------------------<br />type List&lt;&#39;T&gt; =
  | op_Nil
  | op_ColonColon of Head: &#39;T * Tail: &#39;T list
  interface IReadOnlyList&lt;&#39;T&gt;
  interface IReadOnlyCollection&lt;&#39;T&gt;
  interface IEnumerable
  interface IEnumerable&lt;&#39;T&gt;
  member GetReverseIndex: rank: int * offset: int -&gt; int
  member GetSlice: startIndex: int option * endIndex: int option -&gt; &#39;T list
  static member Cons: head: &#39;T * tail: &#39;T list -&gt; &#39;T list
  member Head: &#39;T
  member IsEmpty: bool
  member Item: index: int -&gt; &#39;T with get
  ...<br /><em>&lt;summary&gt;The type of immutable singly-linked lists.&lt;/summary&gt;<br />&lt;remarks&gt;Use the constructors &lt;c&gt;[]&lt;/c&gt; and &lt;c&gt;::&lt;/c&gt; (infix) to create values of this type, or
 the notation &lt;c&gt;[1;2;3]&lt;/c&gt;. Use the values in the &lt;c&gt;List&lt;/c&gt; module to manipulate 
 values of this type, or pattern match against the values directly.
 &lt;/remarks&gt;<br />&lt;exclude /&gt;</em></div>
<div class="fsdocs-tip" id="fs8">val map: mapping: (&#39;T -&gt; &#39;U) -&gt; list: &#39;T list -&gt; &#39;U list<br /><em>&lt;summary&gt;Builds a new collection whose elements are the results of applying the given function
 to each of the elements of the collection.&lt;/summary&gt;<br />&lt;param name=&quot;mapping&quot;&gt;The function to transform elements from the input list.&lt;/param&gt;<br />&lt;param name=&quot;list&quot;&gt;The input list.&lt;/param&gt;<br />&lt;returns&gt;The list of transformed elements.&lt;/returns&gt;<br />&lt;example id=&quot;map-1&quot;&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let inputs = [ &quot;a&quot;; &quot;bbb&quot;; &quot;cc&quot; ]

 inputs |&amp;gt; List.map (fun x -&amp;gt; x.Length)
 &lt;/code&gt;
 Evaluates to &lt;c&gt;[ 1; 3; 2 ]&lt;/c&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs9">val toSeq: list: &#39;T list -&gt; seq&lt;&#39;T&gt;<br /><em>&lt;summary&gt;Views the given list as a sequence.&lt;/summary&gt;<br />&lt;param name=&quot;list&quot;&gt;The input list.&lt;/param&gt;<br />&lt;returns&gt;The sequence of elements in the list.&lt;/returns&gt;<br />&lt;example id=&quot;toseq-1&quot;&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let inputs = [ 1; 2; 5 ]

 inputs |&amp;gt; List.toSeq
 &lt;/code&gt;
 Evaluates to &lt;c&gt;seq { 1; 2; 5 }&lt;/c&gt;.
 &lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs10">val arr: seq&lt;string&gt;</div>
<div class="fsdocs-tip" id="fs11">module String

from Microsoft.FSharp.Core<br /><em>&lt;summary&gt;Functional programming operators for string processing.  Further string operations
 are available via the member functions on strings and other functionality in
  &lt;a href=&quot;http://msdn2.microsoft.com/en-us/library/system.string.aspx&quot;&gt;System.String&lt;/a&gt; 
 and &lt;a href=&quot;http://msdn2.microsoft.com/library/system.text.regularexpressions.aspx&quot;&gt;System.Text.RegularExpressions&lt;/a&gt; types.
 &lt;/summary&gt;<br />&lt;category&gt;Strings and Text&lt;/category&gt;</em></div>
<div class="fsdocs-tip" id="fs12">val concat: sep: string -&gt; strings: seq&lt;string&gt; -&gt; string<br /><em>&lt;summary&gt;Returns a new string made by concatenating the given strings
 with separator &lt;c&gt;sep&lt;/c&gt;, that is &lt;c&gt;a1 + sep + ... + sep + aN&lt;/c&gt;.&lt;/summary&gt;<br />&lt;param name=&quot;sep&quot;&gt;The separator string to be inserted between the strings
 of the input sequence.&lt;/param&gt;<br />&lt;param name=&quot;strings&quot;&gt;The sequence of strings to be concatenated.&lt;/param&gt;<br />&lt;returns&gt;A new string consisting of the concatenated strings separated by
 the separation string.&lt;/returns&gt;<br />&lt;exception cref=&quot;T:System.ArgumentNullException&quot;&gt;Thrown when &lt;c&gt;strings&lt;/c&gt; is null.&lt;/exception&gt;<br />&lt;example id=&quot;concat-1&quot;&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let input1 = [&quot;Stefan&quot;; &quot;says:&quot;; &quot;Hello&quot;; &quot;there!&quot;]
 
 input1 |&amp;gt; String.concat &quot; &quot;  // evaluates &quot;Stefan says: Hello there!&quot;
 
 let input2 = [0..9] |&amp;gt; List.map string 
 
 input2 |&amp;gt; String.concat &quot;&quot;    // evaluates &quot;0123456789&quot;
 input2 |&amp;gt; String.concat &quot;, &quot;  // evaluates &quot;0, 1, 2, 3, 4, 5, 6, 7, 8, 9&quot;
 
 let input3 = [&quot;No comma&quot;]
 
 input3 |&amp;gt; String.concat &quot;,&quot;   // evaluates &quot;No comma&quot;
 &lt;/code&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs13">namespace System</div>
<div class="fsdocs-tip" id="fs14">type Environment =
  static member Exit: exitCode: int -&gt; unit
  static member ExpandEnvironmentVariables: name: string -&gt; string
  static member FailFast: message: string -&gt; unit + 1 overload
  static member GetCommandLineArgs: unit -&gt; string[]
  static member GetEnvironmentVariable: variable: string -&gt; string + 1 overload
  static member GetEnvironmentVariables: unit -&gt; IDictionary + 1 overload
  static member GetFolderPath: folder: SpecialFolder -&gt; string + 1 overload
  static member GetLogicalDrives: unit -&gt; string[]
  static member SetEnvironmentVariable: variable: string * value: string -&gt; unit + 1 overload
  static member CommandLine: string
  ...<br /><em>&lt;summary&gt;Provides information about, and means to manipulate, the current environment and platform. This class cannot be inherited.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs15">property System.Environment.NewLine: string with get<br /><em>&lt;summary&gt;Gets the newline string defined for this environment.&lt;/summary&gt;<br />&lt;returns&gt;&lt;see langword=&quot;\r\n&quot; /&gt; for non-Unix platforms, or &lt;see langword=&quot;\n&quot; /&gt; for Unix platforms.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs16">val theValidDeployment: obj</div>
<div class="fsdocs-tip" id="fs17">val output2: obj</div>
<div class="fsdocs-tip" id="fs18">val content2: obj</div>

        </div>

        <!-- BEGIN SEARCH BOX: this adds support for the search box -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
        <script type="text/javascript">var fsdocs_search_baseurl = '/Overboard/';</script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
        <script type="text/javascript" src="/Overboard/content/fsdocs-search.js"></script>
        <!-- END SEARCH BOX: this adds support for the search box -->
    </div>
</body>

</html>